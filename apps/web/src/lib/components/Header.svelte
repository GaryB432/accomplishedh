<script lang="ts">
  import { browser } from "$app/environment";
  import { resolve } from "$app/paths";
  import PreviewPanel from "$lib/components/PreviewPanel.svelte";
  import ThemeSwitch from "$lib/components/ThemeSwitch.svelte";

  interface Props {
    admin: boolean;
    theme?: "dark" | "light";
    vercelEnv: {
      GIT_COMMIT_MESSAGE: string;
      GIT_COMMIT_REF: string;
      GIT_COMMIT_SHA: string;
    };
  }
  let { admin = false, theme = "light", vercelEnv }: Props = $props();
</script>

<nav>
  <section class="lefter">
    <section style="width:145px;height:45px">
      <a href={resolve("/")} aria-label="home">
        <div class="art">
          <svg id="logo" width="31" height="43" viewBox="0 0 130.28 178.38">
            <g>
              <path
                d="M130.07,59.72c-1.19-16.76-7.64-33.11-20-44.29a104.89,104.89,0,0,1,7.29,47.4,120.36,120.36,0,0,1-8.44,35c-.69,1.75-1.42,3.47-2.18,5.19s-1.57,3.43-2.41,5.11-1.7,3.37-2.61,5-1.84,3.29-2.8,4.91-2,3.21-3,4.79-2.1,3.14-3.19,4.67-2.21,3-3.37,4.55-2.33,3-3.54,4.4-2.45,2.87-3.71,4.27-2.56,2.77-3.88,4.11-2.67,2.67-4,4-2.77,2.56-4.19,3.79-2.87,2.45-4.35,3.62-3,2.33-4.47,3.44l-.82.6a9.33,9.33,0,0,0,1-2.19c.56-1.44,1-2.9,1.57-4.36.41-1.13.85-2.25,1.15-3.42.48-1.86,1.14-3.64,1.63-5.53,4-15.17,5.23-31.36.33-46.45a49.3,49.3,0,0,0-3.28-7.44,50.39,50.39,0,0,0-4.63-7.11,66.56,66.56,0,0,0-9.67-10.25c-2.17-1.88-4.39-3.68-6.65-5.43C39.94,66.59,38,65.22,36,63.86c-1.37-.94-2.8-1.79-4.21-2.68-2.32-1.45-4.64-2.91-7-4.34s-4.88-2.9-7.32-4.34c-1-.62.56-.62,1-.51,7.77,1.88,15.55,3.86,23.5,4.87,4.39.56,8.89.93,13.35,1.07a72.94,72.94,0,0,0,13.3-.41c.84-.12,1.68-.28,2.51-.47a34.28,34.28,0,0,0,4.34-1c1.28-.47,2.6-.84,3.86-1.36a39.32,39.32,0,0,0,5.39-2.7,33.08,33.08,0,0,0,6-4.6,32.51,32.51,0,0,0,4.78-5.8,30.52,30.52,0,0,0,3.73-8.64,23.87,23.87,0,0,0,.75-5.72,26,26,0,0,0-6-17.43,24.72,24.72,0,0,0-5.87-5.2A24.3,24.3,0,0,0,82.52,1.8C81.16,1.38,79.77,1,78.37.72L78,.63,77.61.55,77.23.48,76.85.41,76.46.34,76.08.27,75.7.21,75.31.14c-.11,0-.41-.07-.51,0s.4.38.51.44l.31.2.3.18.29.19.29.2.27.2,0,0A23.59,23.59,0,0,1,80.61,5.2a21.19,21.19,0,0,1,3,4.73,21.92,21.92,0,0,1,1.17,3.2,18,18,0,0,1,.81,3.58,52.41,52.41,0,0,1,0,6.14,17.9,17.9,0,0,1-.68,3.69A21,21,0,0,1,83,31.23a21.47,21.47,0,0,1-4.72,6.05,27.29,27.29,0,0,1-3.41,2.42,14.29,14.29,0,0,1-3.18,1.41,24.8,24.8,0,0,1-3.41.79,11.64,11.64,0,0,1-2.7.16A32.61,32.61,0,0,1,62,41.49a8.31,8.31,0,0,1-1.84-.55,22.92,22.92,0,0,1-5.72-3.51A22.24,22.24,0,0,1,48,27.72,23,23,0,0,1,46.8,19a27.76,27.76,0,0,1,.88-5.36,22.52,22.52,0,0,1,5.14-9.46c.25-.27.51-.53.77-.78a15.8,15.8,0,0,1,2.75-2.28c.26-.15.55-.27.82-.43C57.27.6,58,.2,57.81,0s-.35,0-.42,0l-.51.1c-.34.09-.68.19-1,.26-.68.14-1.36.28-2,.4a60,60,0,0,0-9.29,2.47A70.94,70.94,0,0,0,35.67,7a63.57,63.57,0,0,0-8.31,5.16c-.9.66-1.78,1.35-2.66,2a63.8,63.8,0,0,0-6.14,5.6,67,67,0,0,0-6.58,8,58.5,58.5,0,0,0-4.73,7.86c-.73,1.49-1.49,3-2.11,4.52-.87,2.19-1.64,4.43-2.41,6.66a22.5,22.5,0,0,0-.66,2.44c-.23,1-.39,1.95-.63,2.91a35.7,35.7,0,0,0-.92,5.34C.31,59.76.05,62,0,64.24A64.26,64.26,0,0,0,.18,71c.21,2.26.54,4.51.89,6.75a48.56,48.56,0,0,0,1.5,6.55c.31,1,.63,2,1,2.91.53,1.55,1.05,3.1,1.67,4.61s1.21,2.7,1.88,4c1,2,2,4.14,3.21,6.11,1.62,2.67,3.36,5.27,5.16,7.82A117.26,117.26,0,0,0,22.72,119c3.46,4,7,7.89,10.72,11.7,1.79,1.85,3.63,3.65,5.43,5.49,2.46,2.54,4.92,5.08,7.35,7.66,2,2.05,3.88,4.13,5.76,6.25a87.06,87.06,0,0,1,7.57,9.75c.15.21.28.42.42.64a43.83,43.83,0,0,1,3,5.26,38.64,38.64,0,0,1,2.12,5.7,37.86,37.86,0,0,1,1.18,6c0,.32.07.63.1.94a279.23,279.23,0,0,0,36.26-41.44c12.93-18.11,23.88-38.33,26.92-60.37A81.73,81.73,0,0,0,130.07,59.72Z"
              />
            </g>
          </svg>
          <div class="ha">
            <svg id="human" width="100" height="23" viewBox="0 0 395 90">
              <g>
                <path
                  d="M37.08,23.54A22.6,22.6,0,0,1,54,30.5q6.77,7,6.77,19.23V88.58h-19V52.51c0-3.71-1-6.55-3.1-8.54a11,11,0,0,0-7.91-3,11.4,11.4,0,0,0-8.61,3.29Q19,47.58,19,54V88.58H0V0H19V31.26Q24.68,23.53,37.08,23.54Z"
                />
                <path
                  d="M114.64,25.31h19V88.58h-19v-6Q109,90.36,96.55,90.35a22.59,22.59,0,0,1-16.89-7q-6.78-7-6.77-19.23V25.31h19V61.37q0,5.57,3.1,8.54a10.92,10.92,0,0,0,7.91,3,11.39,11.39,0,0,0,8.6-3.29c2.11-2.2,3.16-5.44,3.16-9.75Z"
                />
                <path
                  d="M218.41,23.54q10.88,0,17.46,7.15t6.58,19V88.58h-19V51.38a11.45,11.45,0,0,0-2.34-7.6A8.37,8.37,0,0,0,214.36,41a8.92,8.92,0,0,0-7.28,3.16q-2.6,3.17-2.59,8.73V88.58h-19V51.38a11.45,11.45,0,0,0-2.34-7.6A8.38,8.38,0,0,0,176.4,41a8.9,8.9,0,0,0-7.28,3.16q-2.6,3.17-2.59,8.73V88.58h-19V25.31h19v5.82q5.17-7.59,16.95-7.59,11,0,16.58,8.35Q205.88,23.54,218.41,23.54Z"
                />
                <path
                  d="M301.42,25.31h19V88.58h-19v-6q-6.71,7.73-18.86,7.72-12.53,0-21.38-9.68t-8.86-23.73q0-14,8.86-23.72t21.38-9.68q12.15,0,18.86,7.72Zm-25.94,42.9a16.28,16.28,0,0,0,21.76,0q4.18-4.18,4.18-11.27t-4.18-11.26a16.28,16.28,0,0,0-21.76,0q-4.19,4.18-4.18,11.26T275.48,68.21Z"
                />
                <path
                  d="M371.39,23.54a22.63,22.63,0,0,1,16.9,7q6.76,7,6.77,19.23V88.58h-19V52.51c0-3.71-1-6.55-3.1-8.54a10.94,10.94,0,0,0-7.9-3,11.4,11.4,0,0,0-8.61,3.29Q353.3,47.58,353.3,54V88.58h-19V25.31h19v6Q359,23.53,371.39,23.54Z"
                />
              </g>
            </svg>
            <svg
              id="accomplishment"
              width="100"
              height="12"
              viewBox="0 0 404.12 49.35"
            >
              <g>
                <path
                  d="M20.59,12.2h8V38.74h-8v-2.5a9.92,9.92,0,0,1-7.91,3.24,11.72,11.72,0,0,1-9-4.06A14.22,14.22,0,0,1,0,25.47a14.22,14.22,0,0,1,3.71-9.95,11.76,11.76,0,0,1,9-4.06,9.92,9.92,0,0,1,7.91,3.24Zm-10.88,18a6.17,6.17,0,0,0,4.56,1.75,6.17,6.17,0,0,0,4.57-1.75,6.39,6.39,0,0,0,1.75-4.72,6.41,6.41,0,0,0-1.75-4.72A6.17,6.17,0,0,0,14.27,19a6.17,6.17,0,0,0-4.56,1.75A6.37,6.37,0,0,0,8,25.47,6.35,6.35,0,0,0,9.71,30.19Z"
                />
                <path
                  d="M47.12,39.48a13.72,13.72,0,0,1-14.06-14,13.72,13.72,0,0,1,14.06-14,13.76,13.76,0,0,1,7,1.86,13.19,13.19,0,0,1,5,4.93l-7,4a5.21,5.21,0,0,0-5.15-3A5.8,5.8,0,0,0,42.71,21,6.06,6.06,0,0,0,41,25.47a6.06,6.06,0,0,0,1.69,4.43A5.8,5.8,0,0,0,47,31.63q3.77,0,5.15-3l7,4a13.12,13.12,0,0,1-4.93,5A13.77,13.77,0,0,1,47.12,39.48Z"
                />
                <path
                  d="M74.5,39.48a13.72,13.72,0,0,1-14.06-14,13.72,13.72,0,0,1,14.06-14,13.76,13.76,0,0,1,7,1.86,13.19,13.19,0,0,1,5,4.93l-6.95,4a5.21,5.21,0,0,0-5.15-3A5.8,5.8,0,0,0,70.09,21a6.06,6.06,0,0,0-1.69,4.43,6.06,6.06,0,0,0,1.69,4.43,5.8,5.8,0,0,0,4.3,1.73q3.77,0,5.15-3l6.95,4a13.12,13.12,0,0,1-4.93,5A13.77,13.77,0,0,1,74.5,39.48Z"
                />
                <path
                  d="M111.85,35.42a14.06,14.06,0,0,1-24-10,13.5,13.5,0,0,1,4.08-9.95,14.28,14.28,0,0,1,19.95,0,13.47,13.47,0,0,1,4.09,10A13.47,13.47,0,0,1,111.85,35.42ZM97.53,30a6.28,6.28,0,0,0,8.7,0A6.1,6.1,0,0,0,108,25.47,6.1,6.1,0,0,0,106.23,21a6.28,6.28,0,0,0-8.7,0,6.1,6.1,0,0,0-1.75,4.51A6.1,6.1,0,0,0,97.53,30Z"
                />
                <path
                  d="M150.17,11.46a9.47,9.47,0,0,1,7.32,3,11.33,11.33,0,0,1,2.76,8V38.74h-8V23.14a4.83,4.83,0,0,0-1-3.19,3.5,3.5,0,0,0-2.84-1.17,3.73,3.73,0,0,0-3.05,1.33,5.61,5.61,0,0,0-1.09,3.66v15h-8V23.14a4.83,4.83,0,0,0-1-3.19,3.5,3.5,0,0,0-2.84-1.17,3.73,3.73,0,0,0-3.05,1.33,5.61,5.61,0,0,0-1.09,3.66v15h-8V12.2h8v2.45q2.18-3.2,7.11-3.19a7.81,7.81,0,0,1,6.95,3.5C144.1,12.63,146.66,11.46,150.17,11.46Z"
                />
                <path
                  d="M181.58,11.46a11.76,11.76,0,0,1,9,4.06,14.22,14.22,0,0,1,3.71,10,14.22,14.22,0,0,1-3.71,10,11.72,11.72,0,0,1-9,4.06,9.92,9.92,0,0,1-7.91-3.24V49.35h-8V12.2h8v2.5A9.92,9.92,0,0,1,181.58,11.46Zm-6.13,18.73a6.75,6.75,0,0,0,9.07,0,6.29,6.29,0,0,0,1.78-4.72,6.31,6.31,0,0,0-1.78-4.72,6.75,6.75,0,0,0-9.07,0,6.31,6.31,0,0,0-1.78,4.72A6.29,6.29,0,0,0,175.45,30.19Z"
                />
                <path d="M198.77,38.74V0h8V38.74Z" />
                <path
                  d="M219.92,8.46a4.73,4.73,0,0,1-6.74,0,4.58,4.58,0,0,1-1.41-3.37,4.61,4.61,0,0,1,1.41-3.37,4.76,4.76,0,0,1,6.74,0,4.64,4.64,0,0,1,1.4,3.37A4.61,4.61,0,0,1,219.92,8.46Zm-7.35,30.28V12.2h8V38.74Z"
                />
                <path
                  d="M233.63,20c0,.53.45,1,1.36,1.3s2,.67,3.26,1a30.2,30.2,0,0,1,3.82,1.3,7.74,7.74,0,0,1,3.26,2.63,7.46,7.46,0,0,1,1.36,4.59,7.39,7.39,0,0,1-3.19,6.5,13.52,13.52,0,0,1-7.85,2.2q-8.39,0-11.41-6.32l6.9-3.92a4.32,4.32,0,0,0,4.51,3.13c1.91,0,2.86-.55,2.86-1.65q0-.79-1.35-1.32a29.53,29.53,0,0,0-3.26-1A27,27,0,0,1,230.08,27a8.21,8.21,0,0,1-3.27-2.58,6.84,6.84,0,0,1-1.35-4.3,7.61,7.61,0,0,1,3-6.42,11.88,11.88,0,0,1,7.4-2.28,12.5,12.5,0,0,1,6,1.46,11.22,11.22,0,0,1,4.35,4.22l-6.79,3.66a3.93,3.93,0,0,0-3.56-2.33C234.38,18.47,233.63,19,233.63,20Z"
                />
                <path
                  d="M266.21,11.46a9.49,9.49,0,0,1,7.09,2.92q2.83,2.92,2.84,8.07V38.74h-8V23.61a4.76,4.76,0,0,0-1.3-3.58,4.62,4.62,0,0,0-3.32-1.25A4.82,4.82,0,0,0,260,20.16a5.72,5.72,0,0,0-1.32,4.09V38.74h-8V1.59h8V14.7Q261,11.46,266.21,11.46Z"
                />
                <path
                  d="M311.32,11.46a9.47,9.47,0,0,1,7.32,3,11.33,11.33,0,0,1,2.76,8V38.74h-8V23.14a4.83,4.83,0,0,0-1-3.19,3.5,3.5,0,0,0-2.84-1.17,3.73,3.73,0,0,0-3.05,1.33,5.61,5.61,0,0,0-1.09,3.66v15h-8V23.14a4.83,4.83,0,0,0-1-3.19,3.5,3.5,0,0,0-2.84-1.17,3.73,3.73,0,0,0-3.05,1.33,5.61,5.61,0,0,0-1.09,3.66v15h-8V12.2h8v2.45q2.18-3.2,7.11-3.19a7.8,7.8,0,0,1,6.95,3.5C305.25,12.63,307.81,11.46,311.32,11.46Z"
                />
                <path
                  d="M334,28.65c.92,2.48,3,3.72,6.37,3.72a6.58,6.58,0,0,0,5.1-2L351.8,34q-3.93,5.48-11.56,5.47-6.69,0-10.7-4a13.55,13.55,0,0,1-4-10,13.61,13.61,0,0,1,14.11-14,12.79,12.79,0,0,1,9.63,4,13.84,13.84,0,0,1,3.85,10,15.3,15.3,0,0,1-.32,3.18Zm-.16-5.94h11.41a5.28,5.28,0,0,0-5.62-4.19Q335,18.52,333.81,22.71Z"
                />
                <path
                  d="M373.19,11.46a9.45,9.45,0,0,1,7.08,2.92q2.84,2.92,2.84,8.07V38.74h-8V23.61a4.72,4.72,0,0,0-1.3-3.58,4.61,4.61,0,0,0-3.32-1.25,4.78,4.78,0,0,0-3.6,1.38,5.67,5.67,0,0,0-1.33,4.09V38.74h-8V12.2h8v2.5Q368,11.46,373.19,11.46Z"
                />
                <path
                  d="M404.12,19.85h-5.46v9.39a1.87,1.87,0,0,0,1.27,2,12.17,12.17,0,0,0,4.19.27v7.22q-7.59.8-10.5-1.46t-2.92-8V19.85h-4.25V12.2h4.25v-5l8-2.38V12.2h5.46Z"
                />
              </g>
            </svg>
          </div>
        </div>
      </a>
    </section>
    <PreviewPanel {vercelEnv}></PreviewPanel>
  </section>

  <section class="links">
    {#if browser}
      <ThemeSwitch {theme} />
    {/if}
    {#if admin}
      <a class="rmap" href={resolve("/admin")} aria-label="admin">
        <svg fill="currentColor" width="20" height="35" viewBox="0 0 19 32">
          <path
            d="M19,9.5C19,4.253,14.747,0,9.5,0S0,4.253,0,9.5c0,3.195,1.582,6.015,4,7.736V18c0,0.553,0.448,1,1,1h1v11l3.999,2 l3.022-2.975l-1.006-0.527c-0.193-0.102-0.313-0.303-0.31-0.521c0.003-0.218,0.13-0.414,0.326-0.51L13,27v-1l-0.968-0.483 c-0.195-0.099-0.319-0.298-0.319-0.517s0.124-0.418,0.319-0.517L13,24l-1.434-1.434c-0.131-0.132-0.191-0.317-0.162-0.501 s0.146-0.342,0.312-0.425L13,21v-2h1c0.552,0,1-0.447,1-1v-0.764C17.418,15.515,19,12.695,19,9.5z M9.5,3C10.88,3,12,4.12,12,5.5 S10.88,8,9.5,8S7,6.88,7,5.5S8.12,3,9.5,3z"
          />
        </svg>
      </a>
    {/if}
    <a href={resolve("/about")}>&#x2630;</a>
  </section>
</nav>

<style>
  nav {
    position: sticky;
    top: 0;
    width: 100%;
    height: 65px;
    background-color: var(--primary-color);
    color: white;
    font-size: 2em;
    font-weight: bold;
    padding: 0.2em;
    display: flex;
    align-items: center;
    justify-content: space-between;
    z-index: 99;
    .links {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.5em;
      .rmap svg {
        height: 1.25em;
      }
    }
  }

  .lefter {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 0.5em;
  }

  .art {
    display: flex;
    gap: 0.5em;
    align-items: center;
    justify-content: center;
    .ha {
      display: flex;
      gap: 0.3em;
      flex-direction: column;
      align-items: center;
      width: 100px;
    }
    svg {
      fill: currentColor;
    }
  }

  #logo {
    width: 32px;
    color: var(--secondary-color);
  }
  a {
    text-decoration: none;
    color: unset;
  }
</style>
